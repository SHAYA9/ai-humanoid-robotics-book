"use strict";(globalThis.webpackChunkai_humanoid_robotics_book_new=globalThis.webpackChunkai_humanoid_robotics_book_new||[]).push([[1400],{8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>i});var r=o(6540);const t={},a=r.createContext(t);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(a.Provider,{value:n},e.children)}},9116:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-ros2/rclpy-python-agents","title":"rclpy - Python Agents for ROS 2","description":"rclpy is the official Python client library for ROS 2. It provides a high-level, Pythonic interface to the ROS 2 ecosystem, allowing you to write your own ROS 2 nodes, publishers, subscribers, services, and actions.","source":"@site/docs/module-1-ros2/rclpy-python-agents.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/rclpy-python-agents","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/rclpy-python-agents","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"rclpy - Python Agents for ROS 2"},"sidebar":"tutorialSidebar","previous":{"title":"Nodes, Topics, and Services","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/nodes-topics-services"},"next":{"title":"URDF for Humanoids","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/urdf-humanoids"}}');var t=o(4848),a=o(8453);const s={sidebar_position:4,title:"rclpy - Python Agents for ROS 2"},i="rclpy: Python Agents for ROS 2",l={},c=[{value:"The Anatomy of a Modern ROS 2 Node",id:"the-anatomy-of-a-modern-ros-2-node",level:2},{value:"Using Parameters for Configuration",id:"using-parameters-for-configuration",level:2},{value:"Launching Multiple Nodes with Launch Files",id:"launching-multiple-nodes-with-launch-files",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsxs)(n.h1,{id:"rclpy-python-agents-for-ros-2",children:[(0,t.jsx)(n.code,{children:"rclpy"}),": Python Agents for ROS 2"]})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"rclpy"})," is the official Python client library for ROS 2. It provides a high-level, Pythonic interface to the ROS 2 ecosystem, allowing you to write your own ROS 2 nodes, publishers, subscribers, services, and actions."]}),"\n",(0,t.jsx)(n.h2,{id:"the-anatomy-of-a-modern-ros-2-node",children:"The Anatomy of a Modern ROS 2 Node"}),"\n",(0,t.jsx)(n.p,{children:'While you can write a simple ROS 2 node with just a few lines of code, real-world applications benefit from a more structured, object-oriented approach. Let\'s look at a more robust "Hello World" example:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="my_oop_node.py"',children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyObjectOrientedNode(Node):\n    def __init__(self):\n        # Call the constructor of the parent class (Node)\n        super().__init__('my_oop_node')\n\n        # Use the node's logger to print a message\n        self.get_logger().info('My object-oriented node has started!')\n\ndef main(args=None):\n    # Initialize the rclpy library\n    rclpy.init(args=args)\n\n    # Create an instance of our node\n    node = MyObjectOrientedNode()\n\n    try:\n        # Keep the node running and responsive to events\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        # This allows you to shut down the node cleanly with Ctrl+C\n        pass\n    finally:\n        # Clean up the node and the rclpy library\n        node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,t.jsx)(n.p,{children:"This structure is more scalable and is the standard way to build nodes in ROS 2."}),"\n",(0,t.jsx)(n.h2,{id:"using-parameters-for-configuration",children:"Using Parameters for Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Hardcoding values inside your nodes is generally a bad practice. ",(0,t.jsx)(n.strong,{children:"Parameters"})," allow you to make your nodes configurable from the outside, without having to change the code. You can set parameters from the command line, in launch files, or from other nodes."]}),"\n",(0,t.jsx)(n.p,{children:"Here's how you can declare and use a parameter in your node:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="parameter_node.py"',children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.parameter import Parameter\n\nclass ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n\n        # Declare a parameter with a default value\n        self.declare_parameter('my_parameter', 'world')\n\n        # Create a timer that calls a function every second\n        self.timer = self.create_timer(1.0, self.timer_callback)\n\n    def timer_callback(self):\n        # Get the current value of the parameter\n        my_param = self.get_parameter('my_parameter').get_parameter_value().string_value\n\n        # Use the parameter in your code\n        self.get_logger().info(f'Hello, {my_param}!')\n\n# ... (main function)\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can then run this node and change the parameter from the command line:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Run the node in one terminal\nros2 run my_package parameter_node\n\n# In another terminal, change the parameter\nros2 param set /parameter_node my_parameter "Robotics"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"launching-multiple-nodes-with-launch-files",children:"Launching Multiple Nodes with Launch Files"}),"\n",(0,t.jsxs)(n.p,{children:["In any real robotics system, you'll have many nodes that need to be run at the same time. ",(0,t.jsx)(n.strong,{children:"Launch files"})," are Python scripts that allow you to start, stop, and configure a whole system of nodes at once."]}),"\n",(0,t.jsx)(n.p,{children:"Here is an example of a simple launch file that starts our publisher and subscriber nodes from the previous lesson:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'title="my_launch_file.py"',children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_package',\n            executable='talker',\n            name='my_talker'\n        ),\n        Node(\n            package='my_package',\n            executable='listener',\n            name='my_listener'\n        ),\n    ])\n"})}),"\n",(0,t.jsx)(n.p,{children:"You can then run this launch file from the command line:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_package my_launch_file.py\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will start both the ",(0,t.jsx)(n.code,{children:"talker"})," and ",(0,t.jsx)(n.code,{children:"listener"})," nodes, and they will immediately start communicating with each other."]}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.a,{href:"/ai-humanoid-robotics-book/docs/module-1-ros2/practical-1-ros2-setup",children:"Practical 1: ROS 2 Setup"}),", you will learn how to create a ROS 2 package, build these nodes, and run them to see them communicate. Next, we'll learn how to represent our robot's structure with ",(0,t.jsx)(n.a,{href:"/ai-humanoid-robotics-book/docs/module-1-ros2/urdf-humanoids",children:"URDF for Humanoids"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);