"use strict";(globalThis.webpackChunkai_humanoid_robotics_book_new=globalThis.webpackChunkai_humanoid_robotics_book_new||[]).push([[8401],{5984:(e,n,t)=>{t.d(n,{A:()=>b});var a=t(6540),r=t(3379),s=t(3689),o=t(4335);const l=async e=>{try{if(e.length>500){const n=e.match(/[^.!?]+[.!?]+/g)||[e];return(await Promise.all(n.map(e=>l(e.trim())))).join(" ")}const n=await o.A.get("https://api.mymemory.translated.net/get",{params:{q:e,langpair:"en|ur"}});return n.data&&n.data.responseData?n.data.responseData.translatedText:e}catch(n){return console.warn("Translation segment failed:",n),e}},i=async e=>{try{const{segments:n,doc:t}=(e=>{const n=(new DOMParser).parseFromString(e,"text/html"),t=[],a=document.createTreeWalker(n.body,NodeFilter.SHOW_TEXT,{acceptNode:e=>{const n=e.parentElement;return e.textContent.trim()?"CODE"===n.tagName||"PRE"===n.tagName?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let r;for(;r=a.nextNode();){const e=r.textContent.trim();e.length>0&&t.push({original:e,node:r})}return{segments:t,doc:n}})(e);if(0===n.length)throw new Error("No translatable content found");const a=5;for(let e=0;e<n.length;e+=a){const t=n.slice(e,e+a);await Promise.all(t.map(async e=>{try{const n=await l(e.original);e.node.textContent=n,await new Promise(e=>setTimeout(e,200))}catch(n){console.warn("Failed to translate segment:",n)}}))}return t.body.innerHTML}catch(n){throw console.error("Error translating to Urdu:",n),new Error("Translation failed. Please try again later.")}};var c=t(4848);function d(){const{user:e}=(0,s.A)(),[n,t]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{if("true"===localStorage.getItem("preferUrdu")&&e){t(!0);const e=sessionStorage.getItem(`translation_${window.location.pathname}`);e&&(m(e),x(e))}},[e]);const g=()=>document.querySelector(".theme-doc-markdown, article.markdown, .markdown"),x=e=>{const n=g();n&&(n.innerHTML=e,n.classList.add("urdu-mode"),window.dispatchEvent(new Event("urduTranslationEnabled")))};return e?(0,c.jsxs)("div",{className:"translate-button-container",children:[(0,c.jsxs)("button",{onClick:async()=>{if(n)return t(!1),(()=>{const e=g();e&&l&&(e.innerHTML=l,e.classList.remove("urdu-mode"),window.dispatchEvent(new Event("urduTranslationDisabled")))})(),void localStorage.setItem("preferUrdu","false");if(u)return t(!0),x(u),void localStorage.setItem("preferUrdu","true");o(!0),p(null);try{const e=g();if(!e)throw new Error("Content not found");const n=e.innerHTML;d(n);const a=(e=>{const n=e.cloneNode(!0);return n.querySelectorAll("pre, code").forEach((e,n)=>{e.setAttribute("data-preserve",`CODE_BLOCK_${n}`)}),n.innerHTML})(e),r=await i(a);m(r),sessionStorage.setItem(`translation_${window.location.pathname}`,r),t(!0),x(r),localStorage.setItem("preferUrdu","true")}catch(e){console.error("Translation error:",e),console.error("Error stack:",e.stack),p(e.message||"Translation failed. Please try again."),alert(`Translation Error: ${e.message}\n\nCheck browser console for details.`)}finally{o(!1)}},disabled:r,className:"translate-button "+(n?"active":""),title:n?"Show Original (English)":"Translate to Urdu",children:[(0,c.jsx)("span",{className:"translate-icon",children:r?"\u23f3":n?"\ud83c\uddec\ud83c\udde7":"\ud83c\uddf5\ud83c\uddf0"}),(0,c.jsx)("span",{className:"translate-text",children:r?"Translating...":n?"Show Original":"Translate to Urdu"})]}),h&&(0,c.jsx)("div",{className:"translate-error",children:h})]}):null}function u({currentPreferences:e,onSave:n,onClose:t,isLoading:r}){const[s,o]=(0,a.useState)({difficulty:"intermediate",background:[],interests:"",learningStyle:"balanced",customization:{moreExamples:!0,relateToProjects:!1,simplifyJargon:!1,addVisuals:!1}});(0,a.useEffect)(()=>{e&&o(e)},[e]);const l=e=>{o(n=>({...n,customization:{...n.customization,[e]:!n.customization[e]}}))};return(0,c.jsx)("div",{className:"personalization-modal-overlay",onClick:t,children:(0,c.jsxs)("div",{className:"personalization-modal",onClick:e=>e.stopPropagation(),children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h2",{children:"\ud83c\udfaf Personalize Your Learning"}),(0,c.jsx)("button",{className:"modal-close",onClick:t,children:"\xd7"})]}),(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s)},className:"modal-content",children:[(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("label",{className:"section-label",children:"\ud83d\udcca Difficulty Level"}),(0,c.jsx)("div",{className:"radio-group",children:["beginner","intermediate","advanced"].map(e=>(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"difficulty",value:e,checked:s.difficulty===e,onChange:e=>o({...s,difficulty:e.target.value})}),(0,c.jsx)("span",{children:e.charAt(0).toUpperCase()+e.slice(1)})]},e))})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("label",{className:"section-label",children:"\ud83d\udcbb Your Background (select all that apply)"}),(0,c.jsx)("div",{className:"checkbox-group",children:["Python","C++","JavaScript","ROS","Machine Learning","Robotics","Web Development"].map(e=>(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:s.background.includes(e),onChange:()=>(e=>{o(n=>({...n,background:n.background.includes(e)?n.background.filter(n=>n!==e):[...n.background,e]}))})(e)}),(0,c.jsx)("span",{children:e})]},e))})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("label",{className:"section-label",children:"\ud83c\udfaf Your Interests or Current Projects"}),(0,c.jsx)("textarea",{className:"interests-input",placeholder:"E.g., Building a walking robot, Learning computer vision, Working on autonomous navigation...",value:s.interests,onChange:e=>o({...s,interests:e.target.value}),rows:3})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("label",{className:"section-label",children:"\ud83d\udcda Learning Style"}),(0,c.jsx)("div",{className:"radio-group",children:[{value:"visual",label:"Visual (diagrams, examples)"},{value:"practical",label:"Practical (hands-on, code-first)"},{value:"theoretical",label:"Theoretical (concepts, explanations)"},{value:"balanced",label:"Balanced (mix of all)"}].map(e=>(0,c.jsxs)("label",{className:"radio-option",children:[(0,c.jsx)("input",{type:"radio",name:"learningStyle",value:e.value,checked:s.learningStyle===e.value,onChange:e=>o({...s,learningStyle:e.target.value})}),(0,c.jsx)("span",{children:e.label})]},e.value))})]}),(0,c.jsxs)("div",{className:"form-section",children:[(0,c.jsx)("label",{className:"section-label",children:"\u2699\ufe0f Additional Customizations"}),(0,c.jsxs)("div",{className:"checkbox-group",children:[(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:s.customization.moreExamples,onChange:()=>l("moreExamples")}),(0,c.jsx)("span",{children:"Add more practical examples"})]}),(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:s.customization.relateToProjects,onChange:()=>l("relateToProjects")}),(0,c.jsx)("span",{children:"Relate content to my projects"})]}),(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:s.customization.simplifyJargon,onChange:()=>l("simplifyJargon")}),(0,c.jsx)("span",{children:"Simplify technical jargon"})]}),(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:s.customization.addVisuals,onChange:()=>l("addVisuals")}),(0,c.jsx)("span",{children:"Suggest visual aids and diagrams"})]})]})]}),(0,c.jsxs)("div",{className:"modal-actions",children:[(0,c.jsx)("button",{type:"button",onClick:t,className:"btn-cancel",disabled:r,children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"btn-save",disabled:r,children:r?"Personalizing...":"Apply Personalization"})]})]})]})})}const m="user_personalization_preferences",h=e=>{try{const n=localStorage.getItem(`${m}_${e}`);return n?JSON.parse(n):null}catch(n){return console.error("Error loading preferences:",n),null}},p=(e,n)=>{try{localStorage.setItem(`${m}_${e}`,JSON.stringify(n))}catch(t){console.error("Error saving preferences:",t)}},g=async(e,n,t)=>{try{const a=(e=>{const n=(new DOMParser).parseFromString(e,"text/html");return{headings:Array.from(n.querySelectorAll("h1, h2, h3, h4, h5, h6")).map(e=>({tag:e.tagName,text:e.textContent})),paragraphs:Array.from(n.querySelectorAll("p")).map(e=>e.textContent),lists:Array.from(n.querySelectorAll("ul, ol")).map(e=>Array.from(e.querySelectorAll("li")).map(e=>e.textContent)),fullHtml:e}})(e),r=((e,n,t)=>{const{difficulty:a,background:r,interests:s,learningStyle:o,customization:l}=n;return`You are an expert educational content personalizer. Personalize the following educational content about "${t}" based on these user preferences:\n\n**Difficulty Level:** ${a}\n**User Background:** ${r.length>0?r.join(", "):"General"}\n**Interests/Projects:** ${s||"Not specified"}\n**Learning Style:** ${o}\n\n**Customization Requests:**\n${l.moreExamples?"- Add more practical, relevant examples\n":""}${l.relateToProjects?"- Relate concepts to user's interests and projects\n":""}${l.simplifyJargon?"- Simplify technical jargon and explain terms clearly\n":""}${l.addVisuals?"- Suggest where visual aids or diagrams would help\n":""}\n\n**Instructions:**\n1. Adjust the complexity and depth based on the difficulty level\n2. Use examples and analogies relevant to the user's background\n3. If user has specific interests, relate concepts to those areas\n4. Match the learning style (visual/practical/theoretical/balanced)\n5. Preserve all code blocks exactly as they are\n6. Maintain the HTML structure and formatting\n7. Keep technical accuracy while making content more accessible\n8. Add helpful notes, tips, or "\ud83d\udca1 For ${r[0]||"you"}" sections where relevant\n\n**Original Content:**\n${e.fullHtml}\n\n**Personalized Content (return only HTML, no explanations):**`})(a,n,t),s=await o.A.post("https://api-inference.huggingface.co/models/mistralai/Mixtral-8x7B-Instruct-v0.1",{inputs:r,parameters:{max_new_tokens:2e3,temperature:.7,return_full_text:!1}},{headers:{"Content-Type":"application/json"},timeout:6e4});if(s.data&&s.data[0]&&s.data[0].generated_text){let e=s.data[0].generated_text;return e=e.replace(/```html\n?/g,"").replace(/```\n?/g,""),e.trim()}throw new Error("Invalid response from personalization service")}catch(a){if(console.error("Personalization error:",a),a.response&&503===a.response.status)throw new Error("Personalization service is loading. Please try again in a few seconds.");return x(e,n)}},x=(e,n)=>{const t=(new DOMParser).parseFromString(e,"text/html"),a=t.createElement("div");a.className="personalization-banner",a.innerHTML=`\n    <p><strong>\ud83d\udccc Personalized for you:</strong> \n    ${n.difficulty} level | \n    ${n.background.join(", ")||"General"} background | \n    ${n.learningStyle} learning style\n    </p>\n  `;const r=t.body.firstElementChild;if(r&&t.body.insertBefore(a,r),"beginner"===n.difficulty){const e=t.querySelectorAll("p");if(e.length>0){const n=t.createElement("div");n.className="beginner-tip",n.innerHTML="<p><strong>\ud83d\udca1 Beginner Tip:</strong> Take your time with this chapter. Don't worry if some concepts seem complex at first - they'll become clearer with practice!</p>",e[0].parentNode.insertBefore(n,e[0])}}return t.body.innerHTML};function f(){const{user:e}=(0,s.A)(),[n,t]=(0,a.useState)(!1),[r,o]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),[d,m]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),[b,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(e){const n=h(e.id);y(n);const t=sessionStorage.getItem(`personalized_${window.location.pathname}`);t&&n&&(f(t),o(!0),k(t))}},[e]);const w=()=>document.querySelector(".theme-doc-markdown, article.markdown, .markdown"),k=e=>{const n=w();n&&(n.innerHTML=e,n.classList.add("personalized-mode"))};return e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"personalize-button-container",children:[(0,c.jsxs)("div",{className:"personalize-actions",children:[(0,c.jsxs)("button",{onClick:()=>{r?(o(!1),(()=>{const e=w();e&&d&&(e.innerHTML=d,e.classList.remove("personalized-mode"))})()):x?(o(!0),k(x)):t(!0)},disabled:l,className:"personalize-button "+(r?"active":""),title:r?"Show Original Content":"Personalize Content",children:[(0,c.jsx)("span",{className:"personalize-icon",children:l?"\u2699\ufe0f":r?"\ud83d\udcc4":"\u2728"}),(0,c.jsx)("span",{className:"personalize-text",children:l?"Personalizing...":r?"Show Original":"Personalize for Me"})]}),(r||b)&&(0,c.jsx)("button",{onClick:()=>{t(!0)},className:"personalize-settings-button",title:"Personalization Settings",children:"\u2699\ufe0f"})]}),j&&(0,c.jsx)("div",{className:"personalize-error",children:j})]}),n&&(0,c.jsx)(u,{currentPreferences:b,onSave:async n=>{i(!0),v(null),t(!1);try{const t=w();if(!t)throw new Error("Content not found");d||m(t.innerHTML);const a=document.querySelector("h1")?.textContent||"Chapter",r=await g(t.innerHTML,n,a);f(r),sessionStorage.setItem(`personalized_${window.location.pathname}`,r),p(e.id,n),y(n),o(!0),k(r)}catch(a){console.error("Personalization error:",a),v(a.message||"Personalization failed. Please try again.")}finally{i(!1)}},onClose:()=>t(!1),isLoading:l})]}):null}function b(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"doc-customization-toolbar",children:[(0,c.jsx)(f,{}),(0,c.jsx)(d,{})]}),(0,c.jsx)(r.A,{...e})]})}}}]);