"use strict";(globalThis.webpackChunkai_humanoid_robotics_book_new=globalThis.webpackChunkai_humanoid_robotics_book_new||[]).push([[1400],{8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},9116:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module-1-ros2/rclpy-python-agents","title":"rclpy - Python Agents for ROS 2","description":"rclpy is the official Python client library for ROS 2. It provides a high-level, Pythonic interface to the ROS 2 ecosystem, allowing you to write your own ROS 2 nodes, publishers, subscribers, and more.","source":"@site/docs/module-1-ros2/rclpy-python-agents.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/rclpy-python-agents","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/rclpy-python-agents","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"rclpy - Python Agents for ROS 2"},"sidebar":"tutorialSidebar","previous":{"title":"Nodes, Topics, and Services","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/nodes-topics-services"},"next":{"title":"URDF for Humanoids","permalink":"/ai-humanoid-robotics-book/docs/module-1-ros2/urdf-humanoids"}}');var i=s(4848),o=s(8453);const t={sidebar_position:4,title:"rclpy - Python Agents for ROS 2"},l="rclpy: Python Agents for ROS 2",c={},d=[{value:"Getting Started with <code>rclpy</code>",id:"getting-started-with-rclpy",level:2},{value:"A Minimal <code>rclpy</code> Node",id:"a-minimal-rclpy-node",level:3},{value:"Publishers and Subscribers",id:"publishers-and-subscribers",level:2},{value:"Publisher Node",id:"publisher-node",level:3},{value:"Subscriber Node",id:"subscriber-node",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"rclpy-python-agents-for-ros-2",children:[(0,i.jsx)(n.code,{children:"rclpy"}),": Python Agents for ROS 2"]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rclpy"})," is the official Python client library for ROS 2. It provides a high-level, Pythonic interface to the ROS 2 ecosystem, allowing you to write your own ROS 2 nodes, publishers, subscribers, and more."]}),"\n",(0,i.jsxs)(n.h2,{id:"getting-started-with-rclpy",children:["Getting Started with ",(0,i.jsx)(n.code,{children:"rclpy"})]}),"\n",(0,i.jsxs)(n.p,{children:["Before you can start writing ",(0,i.jsx)(n.code,{children:"rclpy"})," nodes, you need to have a ROS 2 workspace set up. If you haven't done so already, please refer to the official ROS 2 installation guide."]}),"\n",(0,i.jsxs)(n.h3,{id:"a-minimal-rclpy-node",children:["A Minimal ",(0,i.jsx)(n.code,{children:"rclpy"})," Node"]}),"\n",(0,i.jsxs)(n.p,{children:['Here is the "Hello World" of ',(0,i.jsx)(n.code,{children:"rclpy"}),": a simple node that initializes itself and then shuts down."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\ndef main(args=None):\n    # Initialize the rclpy library\n    rclpy.init(args=args)\n\n    # Create a node\n    node = Node('my_first_node')\n\n    # Keep the node alive until it's shut down\n    rclpy.spin(node)\n\n    # Clean up\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This simple example demonstrates the basic structure of a ",(0,i.jsx)(n.code,{children:"rclpy"})," program. Let's break it down:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rclpy.init()"}),": Initializes the ROS 2 communication."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Node('my_first_node')"}),": Creates a new node with the name ",(0,i.jsx)(n.code,{children:"my_first_node"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"rclpy.spin(node)"}),": Enters a loop that keeps the node running and responsive to events."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"node.destroy_node()"})," and ",(0,i.jsx)(n.code,{children:"rclpy.shutdown()"}),": Cleans up the node and the ROS 2 communication."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"publishers-and-subscribers",children:"Publishers and Subscribers"}),"\n",(0,i.jsx)(n.p,{children:"The real power of ROS 2 comes from the communication between nodes. Let's create a simple publisher and subscriber to see this in action."}),"\n",(0,i.jsx)(n.h3,{id:"publisher-node",children:"Publisher Node"}),"\n",(0,i.jsxs)(n.p,{children:["This node will publish a ",(0,i.jsx)(n.code,{children:"String"})," message to the ",(0,i.jsx)(n.code,{children:"/chatter"})," topic every second."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Talker(Node):\n    def __init__(self):\n        super().__init__('talker')\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello World: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args)\n    talker = Talker()\n    rclpy.spin(talker)\n    talker.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"subscriber-node",children:"Subscriber Node"}),"\n",(0,i.jsxs)(n.p,{children:["This node will subscribe to the ",(0,i.jsx)(n.code,{children:"/chatter"})," topic and print any messages it receives."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass Listener(Node):\n    def __init__(self):\n        super().__init__('listener')\n        self.subscription = self.create_subscription(\n            String,\n            'chatter',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    listener = Listener()\n    rclpy.spin(listener)\n    listener.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.a,{href:"/ai-humanoid-robotics-book/docs/module-1-ros2/practical-1-ros2-setup",children:"Practical 1: ROS 2 Setup"}),", you will learn how to create a ROS 2 package, build these nodes, and run them to see them communicate. Next, we'll learn how to represent our robot's structure with ",(0,i.jsx)(n.a,{href:"/ai-humanoid-robotics-book/docs/module-1-ros2/urdf-humanoids",children:"URDF for Humanoids"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);