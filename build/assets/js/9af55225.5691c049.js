"use strict";(globalThis.webpackChunkai_humanoid_robotics_book_new=globalThis.webpackChunkai_humanoid_robotics_book_new||[]).push([[2680],{8348:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"robotics-foundations/the-robot-operating-system-ros-2/labs","title":"7.7 Labs","description":"These labs will guide you through the practical steps of creating, building, and running a multi-node ROS 2 application. Following these exercises will solidify the core concepts discussed in this chapter.","source":"@site/docs/01-robotics-foundations/07-the-robot-operating-system-ros-2/07-labs.md","sourceDirName":"01-robotics-foundations/07-the-robot-operating-system-ros-2","slug":"/robotics-foundations/the-robot-operating-system-ros-2/labs","permalink":"/ai-humanoid-robotics-book/docs/robotics-foundations/the-robot-operating-system-ros-2/labs","draft":false,"unlisted":false,"editUrl":"https://github.com/SHAYA9/ai-humanoid-robotics-book/tree/main/docs/01-robotics-foundations/07-the-robot-operating-system-ros-2/07-labs.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"7.6 Building a ROS 2 Package","permalink":"/ai-humanoid-robotics-book/docs/robotics-foundations/the-robot-operating-system-ros-2/building-a-ros-2-package"},"next":{"title":"Tutorial Intro","permalink":"/ai-humanoid-robotics-book/docs/intro"}}');var t=s(4848),i=s(8453);const o={sidebar_position:7},l="7.7 Labs",c={},d=[{value:"Lab 7.1: Installation and Workspace Setup",id:"lab-71-installation-and-workspace-setup",level:3},{value:"Lab 7.2: Simple Publisher and Subscriber",id:"lab-72-simple-publisher-and-subscriber",level:3},{value:"Lab 7.3: Service for a Simple Calculator",id:"lab-73-service-for-a-simple-calculator",level:3},{value:"Lab 7.4: Putting It All Together with a Launch File",id:"lab-74-putting-it-all-together-with-a-launch-file",level:3},{value:"Module Project: Simulated TurtleBot Control",id:"module-project-simulated-turtlebot-control",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"77-labs",children:"7.7 Labs"})}),"\n",(0,t.jsx)(n.p,{children:"These labs will guide you through the practical steps of creating, building, and running a multi-node ROS 2 application. Following these exercises will solidify the core concepts discussed in this chapter."}),"\n",(0,t.jsx)(n.h3,{id:"lab-71-installation-and-workspace-setup",children:"Lab 7.1: Installation and Workspace Setup"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Install ROS 2 Humble and create a ",(0,t.jsx)(n.code,{children:"colcon"})," workspace."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Install ROS 2:"})," Follow the official ROS 2 Humble Hawksbill installation guide for Ubuntu 22.04. You can find it at ",(0,t.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Installation.html",children:"docs.ros.org"}),'. Choose the "ROS 2 Desktop" installation.']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source ROS 2:"})," After installation, source the main ROS 2 setup file in your terminal. It's good practice to add this to your ",(0,t.jsx)(n.code,{children:".bashrc"})," file so it's sourced automatically in new terminals."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Workspace:"})," Create a directory for your ROS 2 projects."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\ncd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build the Empty Workspace:"})," Run ",(0,t.jsx)(n.code,{children:"colcon build"})," for the first time. This will create the ",(0,t.jsx)(n.code,{children:"install"}),", ",(0,t.jsx)(n.code,{children:"build"}),", and ",(0,t.jsx)(n.code,{children:"log"})," directories."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"colcon build\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source Your Workspace:"})," Source the new setup file generated in your workspace."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Outcome:"})," You now have a functional ROS 2 installation and a ready-to-use workspace."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"lab-72-simple-publisher-and-subscriber",children:"Lab 7.2: Simple Publisher and Subscriber"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Create a ROS 2 package with two nodes that communicate over a topic."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Package:"})," Navigate to your workspace's ",(0,t.jsx)(n.code,{children:"src"})," directory and create a new package."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\nros2 pkg create --build-type ament_python my_robot_pkg --dependencies rclpy std_msgs\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Write the Publisher Node:"})," Inside the ",(0,t.jsx)(n.code,{children:"my_robot_pkg/my_robot_pkg"})," directory, create a file named ",(0,t.jsx)(n.code,{children:"talker_node.py"})," with the publisher code from section 7.2."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Write the Subscriber Node:"})," In the same directory, create a file named ",(0,t.jsx)(n.code,{children:"listener_node.py"})," with the subscriber code from section 7.2."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Edit ",(0,t.jsx)(n.code,{children:"setup.py"}),":"]})," Open ",(0,t.jsx)(n.code,{children:"setup.py"})," and add the entry points for your two nodes in the ",(0,t.jsx)(n.code,{children:"console_scripts"})," section."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"'console_scripts': [\n    'talker = my_robot_pkg.talker_node:main',\n    'listener = my_robot_pkg.listener_node:main',\n],\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Build and Run:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to the root of your workspace (",(0,t.jsx)(n.code,{children:"~/ros2_ws"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Build the package: ",(0,t.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,t.jsxs)(n.li,{children:["Source the workspace: ",(0,t.jsx)(n.code,{children:"source install/setup.bash"})]}),"\n",(0,t.jsxs)(n.li,{children:["Open two terminals. In the first, run the talker: ",(0,t.jsx)(n.code,{children:"ros2 run my_robot_pkg talker"})]}),"\n",(0,t.jsxs)(n.li,{children:["In the second, run the listener: ",(0,t.jsx)(n.code,{children:"ros2 run my_robot_pkg listener"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Outcome:"})," You should see the talker publishing messages and the listener receiving them."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"lab-73-service-for-a-simple-calculator",children:"Lab 7.3: Service for a Simple Calculator"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Implement a client/server pair using a ROS 2 Service."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Write the Server Node:"})," In your ",(0,t.jsx)(n.code,{children:"my_robot_pkg"}),", create a file ",(0,t.jsx)(n.code,{children:"add_two_ints_server.py"})," with the server code from section 7.3."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Write the Client Node:"})," Create ",(0,t.jsx)(n.code,{children:"add_two_ints_client.py"})," with the client code from section 7.3."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Update ",(0,t.jsx)(n.code,{children:"setup.py"}),":"]})," Add the new entry points."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"'console_scripts': [\n    # ... talker and listener\n    'add_server = my_robot_pkg.add_two_ints_server:main',\n    'add_client = my_robot_pkg.add_two_ints_client:main',\n],\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build and Run:"})," Rebuild your workspace with ",(0,t.jsx)(n.code,{children:"colcon build"}),". In one terminal, run the server: ",(0,t.jsx)(n.code,{children:"ros2 run my_robot_pkg add_server"}),". In another, run the client with arguments: ",(0,t.jsx)(n.code,{children:"ros2 run my_robot_pkg add_client 5 10"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Outcome:"})," The client should send the numbers to the server, and the server should log the request and the computed sum."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"lab-74-putting-it-all-together-with-a-launch-file",children:"Lab 7.4: Putting It All Together with a Launch File"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Create a launch file to start multiple nodes at once."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create a Launch Directory:"})," Inside your package's root (",(0,t.jsx)(n.code,{children:"my_robot_pkg"}),"), create a directory named ",(0,t.jsx)(n.code,{children:"launch"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir launch\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Create the Launch File:"})," Inside the ",(0,t.jsx)(n.code,{children:"launch"})," directory, create ",(0,t.jsx)(n.code,{children:"talker_listener.launch.py"})," with the launch file code from section 7.4."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:["Update ",(0,t.jsx)(n.code,{children:"setup.py"}),":"]})," You need to tell the build system to install the launch file. Add the following to your ",(0,t.jsx)(n.code,{children:"data_files"})," list in ",(0,t.jsx)(n.code,{children:"setup.py"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import os\nfrom glob import glob\n# ...\ndata_files=[\n    # ... other data files\n    (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py'))\n],\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build and Launch:"})," Rebuild the workspace. Now, you can start both nodes with a single command:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_pkg talker_listener.launch.py\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Outcome:"})," Both the talker and listener nodes start and begin communicating in a single terminal."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"module-project-simulated-turtlebot-control",children:"Module Project: Simulated TurtleBot Control"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Use the concepts learned to control a simulated robot."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Install ",(0,t.jsx)(n.code,{children:"turtlesim"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install ros-humble-turtlesim\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Start ",(0,t.jsx)(n.code,{children:"turtlesim"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ros2 run turtlesim turtlesim_node\n"})}),"\n",(0,t.jsx)(n.p,{children:"A window with a turtle in the middle should appear."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Explore the Turtle:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ros2 topic list"})," to see the topics ",(0,t.jsx)(n.code,{children:"turtlesim"})," provides. You should see ",(0,t.jsx)(n.code,{children:"/turtle1/cmd_vel"})," for commanding motion and ",(0,t.jsx)(n.code,{children:"/turtle1/pose"})," for getting its position."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"ros2 topic pub"})," to send a single ",(0,t.jsx)(n.code,{children:"geometry_msgs/msg/Twist"})," message to ",(0,t.jsx)(n.code,{children:"/turtle1/cmd_vel"})," to make the turtle move."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub --once /turtle1/cmd_vel geometry_msgs/msg/Twist "{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Write a Control Node:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a new node in your package, ",(0,t.jsx)(n.code,{children:"turtle_controller.py"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["This node should be a publisher that sends ",(0,t.jsx)(n.code,{children:"Twist"})," messages to ",(0,t.jsx)(n.code,{children:"/turtle1/cmd_vel"})," on a timer to make the turtle draw a shape (e.g., a circle or a square)."]}),"\n",(0,t.jsxs)(n.li,{children:["Add the entry point to ",(0,t.jsx)(n.code,{children:"setup.py"})," and rebuild."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Run Your Controller:"})," Start ",(0,t.jsx)(n.code,{children:"turtlesim_node"})," in one terminal and your ",(0,t.jsx)(n.code,{children:"turtle_controller"})," in another."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Outcome:"})," You have created an integrated ROS 2 application that controls a simulated robot, demonstrating your mastery of the core concepts of nodes, topics, and packages."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);