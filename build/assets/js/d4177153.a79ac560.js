"use strict";(globalThis.webpackChunkai_humanoid_robotics_book_new=globalThis.webpackChunkai_humanoid_robotics_book_new||[]).push([[3119],{6701:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"robotics-foundations/the-robot-operating-system-ros-2/managing-complexity","title":"7.4 Managing Complexity: Launch Files and Parameters","description":"As your robotics application grows from two nodes to ten, twenty, or even a hundred, starting and configuring each one manually becomes impossible. This is where ROS 2\'s launch system comes in. Launch files are powerful scripts that allow you to start, configure, and connect a complex system of nodes with a single command.","source":"@site/docs/01-robotics-foundations/07-the-robot-operating-system-ros-2/04-managing-complexity.md","sourceDirName":"01-robotics-foundations/07-the-robot-operating-system-ros-2","slug":"/robotics-foundations/the-robot-operating-system-ros-2/managing-complexity","permalink":"/ai-humanoid-robotics-book/docs/robotics-foundations/the-robot-operating-system-ros-2/managing-complexity","draft":false,"unlisted":false,"editUrl":"https://github.com/SHAYA9/ai-humanoid-robotics-book/tree/main/docs/01-robotics-foundations/07-the-robot-operating-system-ros-2/04-managing-complexity.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"7.3 Synchronous Communication: Services and Actions","permalink":"/ai-humanoid-robotics-book/docs/robotics-foundations/the-robot-operating-system-ros-2/synchronous-communication"},"next":{"title":"7.5 Visualization and Debugging","permalink":"/ai-humanoid-robotics-book/docs/robotics-foundations/the-robot-operating-system-ros-2/visualization-and-debugging"}}');var o=t(4848),i=t(8453);const r={sidebar_position:4},s="7.4 Managing Complexity: Launch Files and Parameters",l={},c=[{value:"Introduction to Launch Files",id:"introduction-to-launch-files",level:3},{value:"Example: Launching the Talker and Listener",id:"example-launching-the-talker-and-listener",level:4},{value:"Using Parameters to Configure Nodes",id:"using-parameters-to-configure-nodes",level:3},{value:"Declaring and Using a Parameter in a Node",id:"declaring-and-using-a-parameter-in-a-node",level:4},{value:"Setting a Parameter from a Launch File",id:"setting-a-parameter-from-a-launch-file",level:4}];function d(e){const n={code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"74-managing-complexity-launch-files-and-parameters",children:"7.4 Managing Complexity: Launch Files and Parameters"})}),"\n",(0,o.jsxs)(n.p,{children:["As your robotics application grows from two nodes to ten, twenty, or even a hundred, starting and configuring each one manually becomes impossible. This is where ROS 2's launch system comes in. ",(0,o.jsx)(n.strong,{children:"Launch files"})," are powerful scripts that allow you to start, configure, and connect a complex system of nodes with a single command."]}),"\n",(0,o.jsx)(n.h3,{id:"introduction-to-launch-files",children:"Introduction to Launch Files"}),"\n",(0,o.jsx)(n.p,{children:"In ROS 2, launch files are typically written in Python. They provide a programmatic way to describe your system's startup configuration. A single launch file can:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Start multiple nodes."}),"\n",(0,o.jsx)(n.li,{children:"Set parameters for each node."}),"\n",(0,o.jsx)(n.li,{children:"Remap topic names to connect nodes in different ways."}),"\n",(0,o.jsx)(n.li,{children:"Group nodes into namespaces to avoid conflicts."}),"\n",(0,o.jsx)(n.li,{children:"Conditionally launch nodes based on arguments."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This approach allows you to define your entire application as a single, version-controllable configuration, making it repeatable and easy to share."}),"\n",(0,o.jsx)(n.h4,{id:"example-launching-the-talker-and-listener",children:"Example: Launching the Talker and Listener"}),"\n",(0,o.jsxs)(n.p,{children:["Remember the ",(0,o.jsx)(n.code,{children:"talker"})," and ",(0,o.jsx)(n.code,{children:"listener"})," nodes from section 7.2? Instead of running them in two separate terminals, we can create a single launch file to start both."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"talker_listener.launch.py"})})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    # This function is the entry point for the launch file\n\n    # Create a LaunchDescription object to hold our actions\n    ld = LaunchDescription()\n\n    # Define the talker node\n    talker_node = Node(\n        package='my_robot_pkg',      # The name of your ROS 2 package\n        executable='talker',         # The name of the executable (from setup.py)\n        name='my_talker'             # An optional custom name for the node\n    )\n\n    # Define the listener node\n    listener_node = Node(\n        package='my_robot_pkg',\n        executable='listener',\n        name='my_listener'\n    )\n\n    # Add the nodes to the LaunchDescription\n    ld.add_action(talker_node)\n    ld.add_action(listener_node)\n\n    return ld\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Now, you can run ",(0,o.jsx)(n.code,{children:"ros2 launch my_robot_pkg talker_listener.launch.py"})," to start both nodes at once."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:(0,o.jsx)("p",{align:"center",children:"PLACEHOLDER: Launch File Workflow Diagram"})}),"\n",(0,o.jsx)(n.em,{children:(0,o.jsxs)("p",{align:"center",children:["A diagram showing ",(0,o.jsx)(n.code,{children:"ros2 launch"})," executing the Python script, which generates a description that the launch system uses to start and configure the talker and listener nodes."]})})]}),"\n",(0,o.jsx)(n.h3,{id:"using-parameters-to-configure-nodes",children:"Using Parameters to Configure Nodes"}),"\n",(0,o.jsxs)(n.p,{children:["Hardcoding values inside your nodes is inflexible. What if you want to change the frequency of your ",(0,o.jsx)(n.code,{children:"talker"})," node without editing the code? ",(0,o.jsx)(n.strong,{children:"Parameters"})," are the solution. They are a built-in ROS 2 feature that allows you to store and modify configuration values for a node while it's running."]}),"\n",(0,o.jsx)(n.h4,{id:"declaring-and-using-a-parameter-in-a-node",children:"Declaring and Using a Parameter in a Node"}),"\n",(0,o.jsxs)(n.p,{children:["First, you need to declare a parameter in your node to make it available. Let's modify our ",(0,o.jsx)(n.code,{children:"talker"})," node to have a configurable ",(0,o.jsx)(n.code,{children:"publish_frequency"}),"."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"talker_with_params.py"})})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# ... imports\nclass TalkerNode(Node):\n    def __init__(self):\n        super().__init__('talker_node')\n\n        # 1. Declare the parameter\n        #    Name: 'publish_frequency'\n        #    Default value: 1.0 (Hz)\n        self.declare_parameter('publish_frequency', 1.0)\n\n        # 2. Get the parameter's value\n        publish_frequency = self.get_parameter('publish_frequency').get_parameter_value().double_value\n        timer_period = 1.0 / publish_frequency # Convert frequency to period\n\n        # Create the publisher and timer as before, but using the parameter\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n        self.timer_ = self.create_timer(timer_period, self.timer_callback)\n        # ... rest of the class\n"})}),"\n",(0,o.jsx)(n.h4,{id:"setting-a-parameter-from-a-launch-file",children:"Setting a Parameter from a Launch File"}),"\n",(0,o.jsx)(n.p,{children:"Now, we can set this parameter's value directly from our launch file."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"talker_configured.launch.py"})})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_robot_pkg',\n            executable='talker',\n            name='my_configured_talker',\n            parameters=[\n                # Set the 'publish_frequency' parameter to 2.0 Hz\n                {'publish_frequency': 2.0}\n            ]\n        )\n    ])\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When you run this launch file, the ",(0,o.jsx)(n.code,{children:"talker"})," node will start and publish messages at 2 Hz instead of the default 1 Hz. This allows you to create highly configurable and reusable nodes."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:(0,o.jsx)("p",{align:"center",children:"PLACEHOLDER: Node Parameter Configuration Diagram"})}),"\n",(0,o.jsx)(n.em,{children:(0,o.jsxs)("p",{align:"center",children:["A diagram showing the launch file passing a parameter value to the ROS 2 parameter server, which the ",(0,o.jsx)(n.code,{children:"talker"})," node then reads during its initialization."]})})]}),"\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.strong,{children:"Lab 7.4: Putting It All Together with a Launch File"}),", you will apply these concepts to create a launch file that starts and configures a complete system, demonstrating the power of the ROS 2 launch system for managing complex applications."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var a=t(6540);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);